/*
  	ahmed saad april 2015
 @link 		http://plus.google.com/+AhmedSaadGmail
 @license 	http://choosealicense.com/licenses/gpl-3.0/ 	GNU GPL V3.0

*/
(function(d){var g=d("<span>",{"class":"swraper"}).hide(),l=d("<span>",{"class":"stoggler"}),p=d("<span>",{"class":"slabel-on"}),q=d("<span>",{"class":"slabel-off"}),m=d("<span>",{"class":"sblob"}),n=["light","modern","dark","flat"],r={start:function(b,a){this.setTemplateStyle(a,b);b.$this.each(function(c,f){this.makeSwitcher(d(f),b,a)}.bind(this));this.behaviour(b)},makeSwitcher:function(b,a,c){var f=b.attr("name").replace(/(\[\])+$/,""),h=b.attr("value");h||(h=f);var d=b.attr("type"),k="checkbox"==
d?a.checkboxs:a.radios,e={components:{},$input:b};e.$switcher=g.clone().attr({"input-name":f,"input-value":b.attr("value"),"input-type":d});"rtl"==a.cssValues.dir&&e.$switcher.addClass("rtl");e.components.$toggler=l.clone();e.components.$on=p.clone().html(b.attr("data-ontext")||c.onText);e.components.$off=q.clone().html(b.attr("data-offtext")||c.offText);e.components.$blob=m.clone();c.reverse?e.components.$toggler.append(e.components.$off,e.components.$blob,e.components.$on).appendTo(e.$switcher):
e.components.$toggler.append(e.components.$on,e.components.$blob,e.components.$off).appendTo(e.$switcher);b.before(e.$switcher);b[0].checked?this.turnOn(e,a,!0):this.turnOff(e,a,!0);b.prop("disabled")&&e.$switcher.addClass("disabled").attr("title","switch is disabled!");(family=k.group[f])?(family.group[h]=e,family.length++):(k.group[f]=family={group:{},length:1},family.group[h]=e,k.groupLength++,"radio"==d&&(family.enabled=0,family.disabled=0,family.switchable=!1));"radio"==d&&(b[0].disabled?family.disabled++:
family.enabled++,b[0].checked&&(family.checkedKey=h),family.switchable=2<=family.enabled?!0:!1);a.$switchers=a.$switchers.add(e.$switcher);k.length++;e.$switcher.show()},setTemplateStyle:function(b,a){g.css({width:[b.width,"px"].join(""),"line-height":[b.height,"px"].join("")}).removeClass(n.join(" ")).addClass(b.theme);a.cssValues.switcherWidth=b.width;a.cssValues.switcherHeight=b.height;a.cssValues.blobOffset=b.blobOffset;a.cssValues.blobWidth=a.cssValues.blobHeight=a.cssValues.switcherHeight-2*
b.blobOffset;m.css({width:a.cssValues.blobWidth,height:a.cssValues.blobHeight});b.reverse?(a.transformOff=["translateX(",a.transformDir,a.cssValues.blobWidth/2+a.cssValues.blobOffset,"px)"].join(""),a.transformOn=["translateX(",a.transformDir,a.cssValues.switcherWidth-a.cssValues.blobWidth/2-a.cssValues.blobOffset,"px)"].join("")):(a.transformOn=["translateX(",a.transformDir,a.cssValues.blobWidth/2+a.cssValues.blobOffset,"px)"].join(""),a.transformOff=["translateX(",a.transformDir,a.cssValues.switcherWidth-
a.cssValues.blobWidth/2-a.cssValues.blobOffset,"px)"].join(""));a.transformOn={"-webkit-transform":a.transformOn,"-moz-transform":a.transformOn,"-o-transform":a.transformOn,"-ms-transform":a.transformOn,transform:a.transformOn};a.transformOff={"-webkit-transform":a.transformOff,"-moz-transform":a.transformOff,"-o-transform":a.transformOff,"-ms-transform":a.transformOff,transform:a.transformOff};l.css("font-size","");(20>b.height||b.autoFontSize)&&l.css({"font-size":[b.height/2,"px"].join("")});g.css("margin",
"");if(b.autoStick){var c=a.$this.first(),f=c.prev("label"),d;f&&(d=c.parent().width(),d-=b.inputs?c.outerWidth(!0):0,d-=f.outerWidth(!0),c=d-b.width,c-="dark"==b.theme?0:2,"rtl"==a.cssValues.dir?g.css("margin-right",c):g.css("margin-left",c))}},toggle:function(b,a){var c,d;"checkbox"==b.type?(c=a.checkboxs.group[b.name],d=c.group[b.value],d.$input[0].disabled||(d.$input[0].checked?this.turnOff(d,a):this.turnOn(d,a))):(c=a.radios.group[b.name],d=c.group[b.value],d.$input[0].disabled||!c.switchable||
d.$input[0].checked||(this.turnOff(c.group[c.checkedKey],a),this.turnOn(d,a),c.checkedKey=b.value))},turnOff:function(b,a,c){b.components.$toggler.css(a.transformOff).removeClass("on").addClass("off");c||(b.$input.prop("checked",!1),b.$input.trigger("turnoff.rcSwitcher",b),b.$input.trigger("change.rcSwitcher",b,"turnoff"))},turnOn:function(b,a,c){b.components.$toggler.css(a.transformOn).addClass("on").removeClass("off");c||(b.$input.prop("checked",!0),b.$input.trigger("turnon.rcSwitcher",b),b.$input.trigger("change.rcSwitcher",
b,"turnon"))},behaviour:function(b){b.$this.on("click",function(a){a.preventDefault();a.stopPropagation()}.bind(this));b.$switchers.on("click",function(a){var c={};c.type=a.currentTarget.getAttribute("input-type");c.name=a.currentTarget.getAttribute("input-name");c.value=a.currentTarget.getAttribute("input-value");c.value||(c.value=c.name);this.toggle(c,b);a.preventDefault();a.stopPropagation()}.bind(this))}};d.fn.rcSwitcher=function(b){var a={checkboxs:{group:{},groupLength:0,length:0},radios:{group:{},
groupLength:0,length:0},$switchers:d([]),cssValues:{}};a.$this=this.filter("input[type=checkbox], input[type=radio]");try{a.cssValues.dir=window.getComputedStyle(a.$this[0],null).direction||"ltr"}catch(c){}a.transformDir="rtl"==a.cssValues.dir?"":"-";b=d.extend({onText:"ON",offText:"OFF",reverse:!1,inputs:!1,width:56,height:20,blobOffset:1,autoFontSize:!1,theme:"light",autoStick:!1},b||{});b.inputs||a.$this.css("display","none");-1==n.indexOf(b.theme)&&(b.theme="light");r.start(a,b);return this}})(jQuery);