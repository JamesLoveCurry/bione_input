jQuery.validator.addMethod("specificSymbeol",function(value,element){var specificSymbeol=/^[\u4e00-\u9fa5\da-zA-Z\-\_]+$/;return this.optional(element)||(specificSymbeol.test(value))},"该字段不能输入特殊符号.");jQuery.validator.addMethod("checkAttrName",function(value,element){var attrName=/^[a-zA-Z_]\w*$/;return this.optional(element)||(attrName.test(value))},"请输入由a-z,A-Z,_开头的合法变量名.");jQuery.validator.addMethod("mobile",function(value,element){var length=value.length;var mobile=/^(1[0-9]{10})$/;return this.optional(element)||(length==11&&mobile.test(value))},"手机号码格式错误");jQuery.validator.addMethod("phone",function(value,element){var tel=/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/;return this.optional(element)||(tel.test(value))},"电话号码格式错误");jQuery.validator.addMethod("greaterThan",function(value,element,params){if(value==""||value==null){return true}var ele=$("[name="+params+"]");if(ele.is(":text")&&ele.attr("ltype")=="date"){var tdate;var fdate;if(typeof value=="string"&&value.indexOf("-")!=-1&&value.length>=10){tdate=new Date(new Number(value.substr(0,4)),new Number(value.substr(5,2))-1,new Number(value.substr(8,2))).valueOf()/(60*60*24*1000)}else{tdate=new Date(value).valueOf()/(60*60*24*1000)}if(ele.val().indexOf("-"!=-1&&ele.val().length>=10)){fdate=new Date(new Number(ele.val().substr(0,4)),new Number(ele.val().substr(5,2))-1,new Number(ele.val().substr(8,2))).valueOf()/(60*60*24*1000)}else{fdate=new Date(ele.val()).valueOf()/(60*60*24*1000)}return tdate-fdate>0?true:false}else{return value>ele.val()?true:false}},"Data structure error.");jQuery.validator.addMethod("greaterThanNow",function(value,element,params){if(!value){return true}if(params){var tdate=new Date();var fdate=new Date(tdate.getFullYear(),tdate.getMonth(),tdate.getDate()).valueOf()/(60*60*24*1000);if(value.indexOf("-")!=-1&&value.length>=10){tdate=new Date(new Number(value.substr(0,4)),new Number(value.substr(5,2))-1,new Number(value.substr(8,2))).valueOf()/(60*60*24*1000)}else{tdate=new Date(value).valueOf()/(60*60*24*1000)}return tdate-fdate>=0?true:false}},"日期必须大于当前日期.");jQuery.validator.addMethod("time",function(value,element,params){if(params){var exp=new RegExp(/^(([0-1]\d)|2[0-3]):([0-5]\d):([0-5]\d)$/);return exp.test(value)}},"Please input the legal time.");jQuery.validator.addMethod("cron",function(value,element,params){var cronParams=value.split(" ");if(cronParams.length<6||cronParams.length>7){return false}if(cronParams[3]=="?"||cronParams[5]=="?"){if(!checkSecondsField(cronParams[0])){return false}if(!checkMinutesField(cronParams[1])){return false}if(!checkHoursField(cronParams[2])){return false}if(!checkDayOfMonthField(cronParams[3])){return false}if(!checkMonthsField(cronParams[4])){return false}if(!checkDayOfWeekField(cronParams[5])){return false}if(cronParams.length==7){if(!checkYearField(cronParams[6])){return false}}return true}else{return false}},"Please input the legal cron.");function checkSecondsField(secondsField){return checkField(secondsField,0,59)}function checkField(secondsField,minimal,maximal){if(secondsField.indexOf("-")>-1){var startValue=secondsField.substring(0,secondsField.indexOf("-"));var endValue=secondsField.substring(secondsField.indexOf("-")+1);if(!(checkIntValue(startValue,minimal,maximal,true)&&checkIntValue(endValue,minimal,maximal,true))){return false}try{var startVal=parseInt(startValue,10);var endVal=parseInt(endValue,10);return endVal>startVal}catch(e){return false}}else{if(secondsField.indexOf(",")>-1){return checkListField(secondsField,minimal,maximal)}else{if(secondsField.indexOf("/")>-1){return checkIncrementField(secondsField,minimal,maximal)}else{if(secondsField.indexOf("*")!=-1){return true}else{return checkIntValue(secondsField,minimal,maximal)}}}}}function checkIntValue(value,minimal,maximal,checkExtremity){try{var val=parseInt(value,10);if(value==val){if(checkExtremity){if(val<minimal||val>maximal){return false}}return true}return false}catch(e){return false}}function checkMinutesField(minutesField){return checkField(minutesField,0,59)}function checkHoursField(hoursField){return checkField(hoursField,0,23)}function checkDayOfMonthField(dayOfMonthField){if(dayOfMonthField=="?"){return true}if(dayOfMonthField.indexOf("L")>=0){return checkFieldWithLetter(dayOfMonthField,"L",1,7,-1,-1)}else{if(dayOfMonthField.indexOf("W")>=0){return checkFieldWithLetter(dayOfMonthField,"W",1,31,-1,-1)}else{if(dayOfMonthField.indexOf("C")>=0){return checkFieldWithLetter(dayOfMonthField,"C",1,31,-1,-1)}else{return checkField(dayOfMonthField,1,31)}}}}function checkMonthsField(monthsField){monthsField.replace("JAN","1");monthsField.replace("FEB","2");monthsField.replace("MAR","3");monthsField.replace("APR","4");monthsField.replace("MAY","5");monthsField.replace("JUN","6");monthsField.replace("JUL","7");monthsField.replace("AUG","8");monthsField.replace("SEP","9");monthsField.replace("OCT","10");monthsField.replace("NOV","11");monthsField.replace("DEC","12");return checkField(monthsField,1,31)}function checkDayOfWeekField(dayOfWeekField){dayOfWeekField.replace("SUN","1");dayOfWeekField.replace("MON","2");dayOfWeekField.replace("TUE","3");dayOfWeekField.replace("WED","4");dayOfWeekField.replace("THU","5");dayOfWeekField.replace("FRI","6");dayOfWeekField.replace("SAT","7");if(dayOfWeekField=="?"){return true}if(dayOfWeekField.indexOf("L")>=0){return checkFieldWithLetter(dayOfWeekField,"L",1,7,-1,-1)}else{if(dayOfWeekField.indexOf("C")>=0){return checkFieldWithLetter(dayOfWeekField,"C",1,7,-1,-1)}else{if(dayOfWeekField.indexOf("#")>=0){return checkFieldWithLetter(dayOfWeekField,"#",1,7,1,5)}else{return checkField(dayOfWeekField,1,7)}}}}function checkYearField(yearField){return checkField(yearField,1970,2099)}function checkFieldWithLetter(value,letter,minimalBefore,maximalBefore,minimalAfter,maximalAfter){var canBeAlone=false;var canHaveIntBefore=false;var canHaveIntAfter=false;var mustHaveIntBefore=false;var mustHaveIntAfter=false;if(letter=="L"){canBeAlone=true;canHaveIntBefore=true;canHaveIntAfter=false;mustHaveIntBefore=false;mustHaveIntAfter=false}if(letter=="W"||letter=="C"){canBeAlone=false;canHaveIntBefore=true;canHaveIntAfter=false;mustHaveIntBefore=true;mustHaveIntAfter=false}if(letter=="#"){canBeAlone=false;canHaveIntBefore=true;canHaveIntAfter=true;mustHaveIntBefore=true;mustHaveIntAfter=true}var beforeLetter="";var afterLetter="";if(value.indexOf(letter)>=0){beforeLetter=value.substring(0,value.indexOf(letter))}if(!value.endsWith(letter)){afterLetter=value.substring(value.indexOf(letter)+1)}if(value.indexOf(letter)>=0){if(letter==value){return canBeAlone}if(canHaveIntBefore){if(mustHaveIntBefore&&beforeLetter.length==0){return false}if(!checkIntValue(beforeLetter,minimalBefore,maximalBefore,true)){return false}}else{if(beforeLetter.length>0){return false}}if(canHaveIntAfter){if(mustHaveIntAfter&&afterLetter.length==0){return false}if(!checkIntValue(afterLetter,minimalAfter,maximalAfter,true)){return false}}else{if(afterLetter.length>0){return false}}}return true}function checkIncrementField(value,minimal,maximal){var start=value.substring(0,value.indexOf("/"));var increment=value.substring(value.indexOf("/")+1);if(!("*"==start)){return checkIntValue(start,minimal,maximal,true)&&checkIntValue(increment,minimal,maximal,false)}else{return checkIntValue(increment,minimal,maximal,true)}}function checkListField(value,minimal,maximal){var st=value.split(",");var values=new Array(st.length);for(var j=0;j<st.length;j++){values[j]=st[j]}var previousValue=-1;for(var i=0;i<values.length;i++){var currentValue=values[i];if(!checkIntValue(currentValue,minimal,maximal,true)){return false}try{var val=parseInt(currentValue,10);if(val<=previousValue){return false}else{previousValue=val}}catch(e){}}return true}function isIdCardNo(num){var factorArr=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1);var parityBit=new Array("1","0","X","9","8","7","6","5","4","3","2");var varArray=new Array();var intValue;var lngProduct=0;var intCheckDigit;var intStrLen=num.length;var idNumber=num;if((intStrLen!=15)&&(intStrLen!=18)){return false}for(var i=0;i<intStrLen;i++){varArray[i]=idNumber.charAt(i);if((varArray[i]<"0"||varArray[i]>"9")&&(i!=17)){return false}else{if(i<17){varArray[i]=varArray[i]*factorArr[i]}}}if(intStrLen==18){var date8=idNumber.substring(6,14);if(isDate8(date8)==false){return false}for(var i=0;i<17;i++){lngProduct=lngProduct+varArray[i]}intCheckDigit=parityBit[lngProduct%11];if(varArray[17]!=intCheckDigit){return false}}else{var date6=idNumber.substring(6,12);if(isDate6(date6)==false){return false}}return true}function isDate6(sDate){if(!/^[0-9]{6}$/.test(sDate)){return false}var year,month,day;year=sDate.substring(0,4);month=sDate.substring(4,6);if(year<1700||year>2500){return false}if(month<1||month>12){return false}return true}function isDate8(sDate){if(!/^[0-9]{8}$/.test(sDate)){return false}var year,month,day;year=sDate.substring(0,4);month=sDate.substring(4,6);day=sDate.substring(6,8);var iaMonthDays=[31,28,31,30,31,30,31,31,30,31,30,31];if(year<1700||year>2500){return false}if(((year%4==0)&&(year%100!=0))||(year%400==0)){iaMonthDays[1]=29}if(month<1||month>12){return false}if(day<1||day>iaMonthDays[month-1]){return false}return true}jQuery.validator.addMethod("idcardno",function(value,element){return this.optional(element)||isIdCardNo(value)},"请正确输入身份证号码");jQuery.validator.addMethod("chcharacter",function(value,element){var tel=/^[\u4e00-\u9fa5]+$/;return this.optional(element)||(tel.test(value))},"请输入汉字");jQuery.validator.addMethod("stringMinLength",function(value,element,param){var length=value.length;for(var i=0;i<value.length;i++){if(value.charCodeAt(i)>127){length=length+2}}return this.optional(element)||(length>=param)},$.validator.format("长度不能小于{0}!"));jQuery.validator.addMethod("stringMaxLength",function(value,element,param){var length=value.length;for(var i=0;i<value.length;i++){if(value.charCodeAt(i)>127){length=length+2}}return this.optional(element)||(length<=param)},$.validator.format("长度不能大于{0}!"));jQuery.validator.addMethod("string",function(value,element){return this.optional(element)||/^[\u0391-\uFFE5\w]+$/.test(value)},"不允许包含特殊符号!");jQuery.validator.addMethod("begin",function(value,element,param){var begin=new RegExp("^"+param);return this.optional(element)||(begin.test(value))},$.validator.format("必须以 {0} 开头!"));jQuery.validator.addMethod("notEqualTo",function(value,element,param){return value!=$(param).val()},$.validator.format("两次输入不能相同!"));jQuery.validator.addMethod("notEqual",function(value,element,param){return value!=param},$.validator.format("输入值不允许为{0}!"));jQuery.validator.addMethod("gt",function(value,element,param){return value>param},$.validator.format("输入值必须大于{0}!"));